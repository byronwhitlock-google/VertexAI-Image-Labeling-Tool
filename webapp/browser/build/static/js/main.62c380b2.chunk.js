(this["webpackJsonpautoml-labeling-tool-ui"]=this["webpackJsonpautoml-labeling-tool-ui"]||[]).push([[0],{217:function(e,t,n){},219:function(e,t,n){},242:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(17),c=n.n(s),i=(n(217),n(12)),o=n(8),l=n.n(o),u=n(14),h=n(18),d=n(19),b=n(11),p=n(23),j=n(22),m=(n(219),n(40)),f=n(344),O=n(353),v=n(354),x=n(57),g=n(351),k=n(348),w=n(314),C=n(346),y=n(114),L=n(349),S=n(368),N=function(){function e(){Object(h.a)(this,e),this.clientId="976239279537-uo7h85trcol8nl5shb0k9ai7iufbs2ta.apps.googleusercontent.com",this.bucketName=localStorage.getItem("bucketName")||"",this.projectId=localStorage.getItem("projectId")||"",this.thumbnailWidth=localStorage.getItem("thumbnailWidth")||"300",this.locationCsv=localStorage.getItem("locationCsv")||"",this.locationImport=localStorage.getItem("locationImport")||""}return Object(d.a)(e,[{key:"persist",value:function(){localStorage.setItem("bucketName",this.bucketName),localStorage.setItem("projectId",this.projectId),localStorage.setItem("thumbnailWidth",this.thumbnailWidth),localStorage.setItem("locationCsv",this.locationCsv),localStorage.setItem("locationImport",this.locationImport)}}]),e}(),I=n(145),D=n(124),F=n.n(D),A=n(2),T=Object(f.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"25ch"}},avatar:{backgroundColor:y.a[100],color:y.a[600]}}}));function E(e){var t=T(),n=e.onClose,r=e.selectedValue,s=e.open,c=new N,i=Object(a.useState)(!1),o=Object(m.a)(i,2),l=o[0],u=o[1];return Object(A.jsxs)(C.a,{onClose:function(){n(r),l&&setTimeout((function(){return window.location.reload(!0)}),1)},"aria-labelledby":"simple-dialog-title",open:s,children:[Object(A.jsx)("table",{children:Object(A.jsxs)("tr",{children:[Object(A.jsxs)("td",{width:"100%",children:[Object(A.jsxs)("center",{children:[Object(A.jsx)(x.a,{variant:"h6",children:"UI Configuration"}),"  "]}),"   "]}),Object(A.jsxs)("td",{children:[" ",Object(A.jsx)(I.a,{"aria-label":"close",onClick:e.onClose,children:Object(A.jsx)(F.a,{})}),"   "]})]})}),Object(A.jsxs)(k.a,{children:[Object(A.jsx)(L.a,{}),Object(A.jsx)(w.a,{children:Object(A.jsx)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:Object(A.jsx)(S.a,{id:"bucketName",label:"Bucket Name",onChange:function(e){c.bucketName!=e.target.value&&(c.bucketName=e.target.value,c.persist(),u(!0))},defaultValue:c.bucketName})})}),Object(A.jsx)(w.a,{children:Object(A.jsx)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:Object(A.jsx)(S.a,{id:"projectId",label:"Project ID",onChange:function(e){c.projectId!=e.target.value&&(c.projectId=e.target.value,c.persist(),u(!0))},defaultValue:c.projectId})})}),Object(A.jsx)(w.a,{children:Object(A.jsx)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:Object(A.jsx)(S.a,{id:"thumbnailWidth",label:"Thumbnail Width (Pixels)",onChange:function(e){c.thumbnailWidth!=e.target.value&&(c.thumbnailWidth=e.target.value,c.persist(),u(!0))},defaultValue:c.thumbnailWidth})})}),Object(A.jsxs)(w.a,{children:[Object(A.jsx)(x.a,{variant:"strong",children:"Csv Location"}),Object(A.jsx)("pre",{children:c.bucketName})]}),Object(A.jsx)(w.a,{children:Object(A.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:["GS:// ",Object(A.jsx)(S.a,{id:"locationCsv",label:"CSV Location",onChange:function(e){c.locationCsv!=e.target.value&&(c.locationCsv=e.target.value,c.persist(),u(!0))},defaultValue:c.locationCsv})]})}),Object(A.jsxs)(w.a,{children:[Object(A.jsx)(x.a,{variant:"strong",children:"Import Labels"}),Object(A.jsx)("pre",{children:c.bucketName})]}),Object(A.jsx)(w.a,{children:Object(A.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:["GS:// ",Object(A.jsx)(S.a,{id:"locationImport",label:"Label Import Location",onChange:function(e){c.locationImport!=e.target.value&&(c.locationImport=e.target.value,c.persist(),u(!0))},defaultValue:c.locationImport})]})})]})]})}var M=n(88),R=n.n(M),B=n(372),V=n(313),W=n(352),_=n(316),G=n(189),P=n(171),H=n.n(P),z=n(128),U=n.n(z),K={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,background:"#e3eef4",borderRadius:"5px",boxShadow:24,cursor:"Pointer",p:4};function X(){var e=a.useState(!1),t=Object(m.a)(e,2),n=t[0],r=t[1];return Object(A.jsxs)("div",{children:[Object(A.jsx)(g.a,{onClick:function(){return r(!0)},children:Object(A.jsx)(H.a,{})}),Object(A.jsx)(_.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:n,onClose:function(){return r(!1)},closeAfterTransition:!0,BackdropComponent:V.a,BackdropProps:{timeout:500},children:Object(A.jsx)(G.a,{in:n,children:Object(A.jsx)(W.a,{style:K,children:Object(A.jsxs)("div",{style:{padding:"15px"},children:[Object(A.jsx)(x.a,{id:"modal-modal-title",variant:"h6",component:"h2"}),Object(A.jsxs)(x.a,{id:"transition-modal-description",children:[Object(A.jsx)("h2",{children:"Copyright 2022 Google Inc."}),Object(A.jsxs)(x.a,{children:[Object(A.jsx)("p",{children:'Licensed under the Apache License, Version 2.0 (the "License"); you may not use this application except in compliance with the License. You may obtain a copy of the License at'}),Object(A.jsx)("p",{children:"http://www.apache.org/licenses/LICENSE-2.0"}),Object(A.jsx)("p",{children:'Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.'})]}),Object(A.jsx)("h2",{children:"Source Code"}),Object(A.jsx)(B.a,{title:"View documentation and source code on Github",children:Object(A.jsxs)(g.a,{onClick:function(){window.open("https://github.com/byronwhitlock-google/AutoML-Labeling-Tool")},children:[Object(A.jsx)(U.a,{color:"inherit"}),"\xa0\xa0Github"]})})]})]})})})})]})}var Y=Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function J(e){var t=Y(),n=Object(a.useState)(0),s=Object(m.a)(n,2),c=s[0],o=s[1],l=Object(a.useState)(!1),u=Object(m.a)(l,2),h=(u[0],u[1]);return Object(A.jsx)("div",{className:t.root,children:Object(A.jsx)(O.a,{position:"static",children:Object(A.jsxs)(v.a,{children:[Object(A.jsx)(x.a,{variant:"h6",className:t.title,children:Object(A.jsx)("h3",{children:"Vertex AI Image Classification Labeling Tool"})}),Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(B.a,{title:"Configure Your Settings",children:Object(A.jsxs)(g.a,{color:"inherit",onClick:function(){o(1)},children:["User Settings",Object(A.jsx)(R.a,{})]})}),Object(A.jsx)(E,Object(i.a)({onClose:function(){o(0)},open:c},e))]}),Object(A.jsx)(B.a,{title:"Need Help ?",children:Object(A.jsx)(g.a,{onClick:function(){h(!0)},children:Object(A.jsx)(X,{})})})]})})})}var q=n(370),$=n(355),Q=Object(f.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",outline:"none !important"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function Z(e){var t=Q(),n={__html:e.content};return Object(A.jsx)(_.a,Object(i.a)(Object(i.a)({"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal},e),{},{closeAfterTransition:!0,BackdropComponent:V.a,BackdropProps:{timeout:500},children:Object(A.jsx)(G.a,{in:e.open,children:Object(A.jsxs)(q.a,{severity:e.severity||"error",children:[Object(A.jsx)($.a,{children:Object(A.jsx)("span",{id:"transition-modal-title",children:e.title})}),Object(A.jsx)("span",{id:"transition-modal-description",children:Object(A.jsx)("div",{dangerouslySetInnerHTML:n})})]})})}))}var ee=function(){function e(t){Object(h.a)(this,e),this.accessToken=t;var n=new N;this.bucketName=n.bucketName,this.projectId=n.projectId,this.locationId=n.locationId}return Object(d.a)(e,[{key:"getHeaders",value:function(){return{"X-Bearer-Token":this.accessToken,"X-Project-Id":this.projectId,"X-Bucket-Name":this.bucketName,"X-Location-Id":this.locationId}}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in BaseApi.get()"),n={method:"GET",headers:this.getHeaders()},console.log(n),e.next=5,fetch(t,n);case 5:return a=e.sent,e.abrupt("return",this.handleResponse(a));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())},{key:"post",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-Bearer-Token":this.accessToken,"X-Project-Id":this.projectId,"X-Bucket-Name":this.bucketName,"X-Location-Id":this.locationId},body:JSON.stringify(n)});case 2:return a=e.sent,e.abrupt("return",this.handleResponse(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleResponse",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,t.json();case 4:n=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error("Invalid JSON response from server. <Br>".concat(t.status," ").concat(t.statusText));case 10:if(200===t.status){e.next=14;break}throw Error(n.message);case 14:if(!n.hasOwnProperty("error")){e.next=18;break}throw new Error(n.error);case 18:if(!n.hasOwnProperty("data")){e.next=22;break}return e.abrupt("return",n.data);case 22:throw new Error("Unknown Error : "+JSON.stringify(n));case 23:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),te=n(174),ne=n.n(te),ae=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"getLabels",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Geting Labels"),e.next=4,this.fetch("/get_labels");case 4:return t=e.sent,console.log(t),e.abrupt("return",t);case 9:if(e.prev=9,e.t0=e.catch(0),"Not Found"!=e.t0.message){e.next=15;break}throw new Error("Bucket Not Found: ".concat(this.config.bucketName,". ").concat(e.t0.message));case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"setLabel",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={labelName:t,filename:n},console.log(a),console.log("Saving  label ".concat(t," on document ").concat(n)),e.next=6,this.post("/set_label",a);case 6:return r=e.sent,console.log(r),e.abrupt("return",r);case 11:if(e.prev=11,e.t0=e.catch(0),"Not Found"!=e.t0.message){e.next=17;break}throw new Error("Bucket Not Found: ".concat(this.config.bucketName,". ").concat(e.t0.message));case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addLabel",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={labelName:t},console.log(n),console.log("Adding label ".concat(t)),e.next=6,this.post("/add_label",n);case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 11:if(e.prev=11,e.t0=e.catch(0),"Not Found"!=e.t0.message){e.next=17;break}throw new Error("Bucket Not Found: ".concat(this.config.bucketName,". ").concat(e.t0.message));case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeLabel",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={labelName:t},console.log(n),console.log("Removing  label ".concat(t," ")),e.next=6,this.post("/remove_label",n);case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 11:if(e.prev=11,e.t0=e.catch(0),"Not Found"!=e.t0.message){e.next=17;break}throw new Error("Bucket Not Found: ".concat(this.config.bucketName,". ").concat(e.t0.message));case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"importLabels",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/import_labels?labelPath=".concat(t),e.abrupt("return",ne()({url:a,method:"GET",headers:this.getHeaders(),onDownloadProgress:function(e){var t=e.currentTarget.response.trim("\n").split("\n");if(t){var a=t[t.length-1];n(a),console.log(a)}}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(ee),re=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"loadDocumentList",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.fetch("/list_documents"));case 4:if(e.prev=4,e.t0=e.catch(0),"Not Found"!=e.t0.message){e.next=10;break}throw new Error("Bucket Not Found: ".concat(this.config.bucketName,". ").concat(e.t0.message));case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(ee),se=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"generateCsv",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.fetch("/generate_csv"));case 4:if(e.prev=4,e.t0=e.catch(0),"Not Found"!=e.t0.message){e.next=10;break}throw new Error("Bucket Not Found: ".concat(this.config.bucketName,". ").concat(e.t0.message));case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(ee),ce=(n(242),n(356)),ie=n(91),oe=n.n(ie),le=n(177),ue=n.n(le),he=n(361),de=n(358),be=n(359),pe=n(357),je=n(360),me=n(176),fe=n.n(me),Oe=n(129),ve=n.n(Oe),xe=n(175),ge=n.n(xe),ke=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={open:!1,newLabel:""},a.config=new N,a.handleClickOpen=a.handleClickOpen.bind(Object(b.a)(a)),a.handleClose=a.handleClose.bind(Object(b.a)(a)),a.updateLabelState=a.updateLabelState.bind(Object(b.a)(a)),a.addLabel=a.addLabel.bind(Object(b.a)(a)),a.removeLabel=a.removeLabel.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"updateLabelState",value:function(e){this.setState({newLabel:e.target.value})}},{key:"addLabel",value:function(){this.setState({newLabel:""}),this.props.onLabelAdded(this.state.newLabel)}},{key:"removeLabel",value:function(e){this.props.onLabelRemoved(e)}},{key:"render",value:function(){var e=this;return Object(A.jsxs)("div",{children:[Object(A.jsx)(B.a,{title:"Add or remove labels.",children:Object(A.jsxs)(w.a,{onClick:this.handleClickOpen,button:!0,children:[Object(A.jsx)(ce.a,{primary:"Edit Labels",secondary:"Add or remove labels"}),Object(A.jsx)(ve.a,{})]},"edit-labels")}),Object(A.jsxs)(C.a,{open:this.state.open,onClose:this.handleClose,children:[Object(A.jsx)(pe.a,{children:"Edit Labels"}),Object(A.jsxs)(de.a,{children:[Object(A.jsxs)(be.a,{children:["Predefined labels. Labels below are merged in context menu  with predictions and existing document labels.",Object(A.jsxs)("small",{children:[Object(A.jsxs)("pre",{children:["gs://",this.config.bucketName,"/config.json"]})," "]})]}),Object(A.jsxs)(w.a,{secondary:"Add new Label",children:[Object(A.jsx)(je.a,{children:"New Label:"}),Object(A.jsx)(S.a,{value:this.state.newLabel,onChange:this.updateLabelState}),Object(A.jsx)(I.a,{edge:"end","aria-label":"save",children:Object(A.jsx)(ge.a,{onClick:this.addLabel})})]}),Object(A.jsx)(k.a,{dense:!0,children:Object.keys(this.props.labels).map((function(t){return"None"==t?"":Object(A.jsxs)(w.a,{children:[Object(A.jsx)(je.a,{children:Object(A.jsx)(oe.a,{})}),Object(A.jsx)(ce.a,{primary:t,secondary:"".concat(e.props.labels[t]," documents")}),Object(A.jsx)(I.a,{edge:"end","aria-label":"delete",children:Object(A.jsx)(fe.a,{onClick:function(){e.removeLabel(t)}})})]},t)}))})]}),Object(A.jsx)(he.a,{children:Object(A.jsx)(g.a,{onClick:this.handleClose,children:"Close"})})]})]})}}]),n}(a.Component),we=(n(4),n(156),n(157),n(158),n(159),n(113)),Ce=n.n(we),ye=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).classes=Object(f.a)({list:{width:250},fullList:{width:"auto"}}),a.state={data:null,isOpen:!1},a.handleDocumentClick=function(e){a.props.handleDocumentUpdate(e)},a.componentDidMount=function(){a.setState({windowHeight:window.innerHeight-325})},a.toggleDrawer=function(e){return function(e){(!e||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&a.setState(Object(i.a)(Object(i.a)({},a.state),{},{isOpen:!a.state.isOpen}))}},a.handleGenerateCsvClick=a.handleGenerateCsvClick.bind(Object(b.a)(a)),console.log("NavigationDrawer props"),console.log(e),a}return Object(d.a)(n,[{key:"handleGenerateCsvClick",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.generateCsv();case 3:for(r in t=e.sent,"/training-animation.gif",n="",a="",n="<font size='+1'><b>gs://".concat(t[0].path,"</b></font><br><i>").concat(t[0].numRecords,"</i> Documents labeled.<br>"),t)s=t[r],r>0&&(a+="<font size='+1'>".concat(s.label,"</font><br>gs://").concat(s.path,"<br><i>").concat(s.numRecords,"</i> Documents labeled. <p>"));a&&(n+="<h3>Word Labels</h3><blockquote>".concat(a,"</blockquote> ")),this.props.setAlert(" <img style='float:right' width='50%' src='".concat("/training-animation.gif","'>\n        <hr>\n       ").concat(n,"\n       \n       <hr>\n        Please go to <a target=\"_new\" href='https://console.cloud.google.com/vertex-ai/datasets/create'>Vertex AI Cloud Console</a>. Choose 'Image Classification' then, import dataset."),"CSV Generation Success"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),this.props.setError(e.t0.message,"CSV Generation Failed");case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(A.jsx)(r.a.Fragment,{children:Object(A.jsx)(B.a,{title:"Generate a CSV file for training a new new model in the AutoML API.",children:Object(A.jsxs)(w.a,{onClick:this.handleGenerateCsvClick,button:!0,children:[Object(A.jsx)(ce.a,{primary:"Generate CSV",secondary:"AutoML training"}),Object(A.jsx)(Ce.a,{})]},"generate-csv")})})}}]),n}(a.Component),Le=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e,a){var r;return Object(h.a)(this,n),(r=t.call(this,e,a)).handleLabelClick=r.handleLabelClick.bind(Object(b.a)(r)),r.props.onLabelSelected(e.selectedLabel),r}return Object(d.a)(n,[{key:"handleLabelClick",value:function(e){this.props.onLabelSelected(e)}},{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.onLabelSelected(this.props.selectedLabel);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(A.jsxs)(k.a,{color:"primary",children:[Object(A.jsxs)(w.a,{onClick:function(t){e.handleLabelClick("None")},button:!0,selected:"None"==this.props.selectedLabel,children:[Object(A.jsx)(ue.a,{color:"secondary"}),"\xa0\xa0\xa0",Object(A.jsx)(ce.a,{secondary:"".concat(this.props.labels.None?this.props.labels.None:0," Unlabeled Docs"),primary:"None"})]}),this.props.filter?this.props.labelsFiltered.map((function(t){return"None"==t?"":0!==e.props.labels[t]?Object(A.jsxs)(w.a,{onClick:function(n){e.handleLabelClick(t)},button:!0,selected:e.props.selectedLabel==t,children:[Object(A.jsx)(oe.a,{color:"primary"}),"\xa0\xa0\xa0",Object(A.jsx)(ce.a,{primary:t,secondary:"".concat(e.props.labels[t]," documents")})]},t):""})):Object.keys(this.props.labels).map((function(t){return"None"==t?"":0!==e.props.labels[t]?Object(A.jsxs)(w.a,{onClick:function(n){e.handleLabelClick(t)},button:!0,selected:e.props.selectedLabel==t,children:[Object(A.jsx)(oe.a,{color:"primary"}),"\xa0\xa0\xa0",Object(A.jsx)(ce.a,{primary:t,secondary:"".concat(e.props.labels[t]," documents")})]},t):""})),Object(A.jsx)(L.a,{}),Object(A.jsx)(ke,Object(i.a)({},this.props)),Object(A.jsx)(L.a,{})]})}}]),n}(a.Component),Se=n(24),Ne=n(363),Ie=n(64),De=n(186),Fe=n(362),Ae=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={mouseX:null,mouseY:null,leftMouseClicked:!1,selectedDocuments:[]},a.documentNode=r.a.createRef(),a.config=new N,a.handleMouseOver=a.handleMouseOver.bind(Object(b.a)(a)),a.handleRightClick=a.handleRightClick.bind(Object(b.a)(a)),a.handleClose=a.handleClose.bind(Object(b.a)(a)),a.handleMenuClick=a.handleMenuClick.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"selectText",value:function(e){if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var n=window.getSelection(),a=document.createRange();a.selectNodeContents(e),n.removeAllRanges(),n.addRange(a)}else console.warn("Could not select text in node: Unsupported browser.")}},{key:"handleMouseOver",value:function(e,t){e.preventDefault(),this.props.multiSelected||this.selectText(t.current)}},{key:"handleContextMenu",value:function(e,t){e.preventDefault(),this.props.multiSelected||this.selectText(t.current),this.setState({mouseX:e.clientX-2,mouseY:e.clientY-4})}},{key:"handleRightClick",value:function(e,t){}},{key:"handleMenuClick",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.handleClose(),this.props.multiSelected?(this.props.onApplyLabelToMultipleDocuments(this.props.selectedKeys,n),this.props.onNonItemClick()):this.props.onApplyLabelToDocument(n,a);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){this.setState({mouseX:null,mouseY:null})}},{key:"render",value:function(){var e=this;return Object(A.jsxs)("span",{ref:this.documentNode,style:{cursor:"context-menu"},onMouseOver:function(t){e.handleMouseOver(t,e.documentNode)},onContextMenu:function(t){e.handleContextMenu(t,e.documentNode)},children:[this.props.children,Object(A.jsxs)(De.a,{keepMounted:!0,open:null!==this.state.mouseY,onClose:this.handleClose,anchorReference:"anchorPosition",anchorPosition:null!==this.state.mouseY&&null!==this.state.mouseX?{top:this.state.mouseY,left:this.state.mouseX}:void 0,children:[Object(A.jsx)(Fe.a,{color:"secondary",onClick:function(t){return e.handleMenuClick(t,"None",e.props.documentName)},children:"None (Remove Label)"},"none"),Object.keys(this.props.labels).map((function(t){return"None"==t?"":Object(A.jsx)(Fe.a,{onClick:function(n){return e.handleMenuClick(n,t,e.props.documentName)},children:t},t)}))]},this.documentNode)]})}}]),n}(a.Component),Te=n(172),Ee=n(108),Me=Object(Te.a)(Ee.a)((function(e){var t=e.theme;return Object(i.a)(Object(i.a)({},t.typography.body2),{},{padding:t.spacing(0),textAlign:"center",color:t.palette.text.secondary,margin:4})}));n(160);var Re=n(131),Be=n.n(Re),Ve=n(178),We=n.n(Ve),_e=n(179),Ge=n.n(_e),Pe={position:"absolute",transform:"translate(135%, -1%)",width:400,height:1,bgcolor:"background.paper",boxShadow:24,p:4},He={fontSize:"40px",cursor:"pointer",position:"relative",zIndex:1,left:"-6vh",top:"-50vh"},ze={fontSize:"40px",cursor:"pointer",position:"relative",zIndex:1,left:"99vh",top:"-50vh"};function Ue(e){var t=a.useState(!1),n=Object(m.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(0),i=Object(m.a)(c,2),o=i[0],l=i[1],u=a.useState(0),h=Object(m.a)(u,2),d=(h[0],h[1],a.useState(!0)),b=Object(m.a)(d,2),p=b[0],j=(b[1],"/image?filename=".concat(e.filename,"&b=").concat(e.bucketName));return Object(A.jsxs)(a.Fragment,{children:[Object(A.jsx)(Be.a,{onClick:function(){return s(!0)},style:{width:"".concat(e.width,"px")},src:j}),Object(A.jsx)(_.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:r,onClose:function(){return s(!1)},closeAfterTransition:!0,BackdropComponent:V.a,BackdropProps:{timeout:500},children:Object(A.jsx)(G.a,{in:r,children:Object(A.jsxs)(W.a,{style:Pe,children:[Object(A.jsx)(Be.a,{src:p?j:"",style:{height:"25vh",marginTop:"24px",width:"100vh",transform:"rotate(".concat(o,"deg)")}}),Object(A.jsx)(We.a,{style:He,onClick:function(){l(o-90)}}),Object(A.jsx)(Ge.a,{style:ze,onClick:function(){l(o+90)}})]})})})]})}var Ke=n(71),Xe=n(132),Ye=n(364),Je=n(365),qe=Object(Xe.createSelectable)(Ae),$e=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e,a){var r;return Object(h.a)(this,n),(r=t.call(this,e,a)).handleResize=function(e){r.setState({windowWidth:window.innerWidth-.3*window.innerWidth,windowHeight:window.innerHeight})},r.config=new N,r.state={windowWidth:window.innerWidth-.3*window.innerWidth,windowHeight:window.innerHeight,selectedKeys:[],multiSelected:!1},r.handleResize=r.handleResize.bind(Object(b.a)(r)),r.handleSelection=r.handleSelection.bind(Object(b.a)(r)),r.handleNonItemClick=r.handleNonItemClick.bind(Object(b.a)(r)),r.handleUnselectClick=r.handleUnselectClick.bind(Object(b.a)(r)),r}return Object(d.a)(n,[{key:"handleSelection",value:function(e){this.setState({selectedKeys:e}),e.length>0?this.setState({multiSelected:!0}):this.setState({multiSelected:!1}),console.log(e)}},{key:"handleUnselectClick",value:function(e,t){if(e.ctrlKey&&this.state.selectedKeys.indexOf(t)>-1){var n=this.state.selectedKeys.filter((function(e){return e!==t}));this.setState({selectedKeys:n})}}},{key:"handleNonItemClick",value:function(){this.setState({selectedKeys:[],multiSelected:!1})}},{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=this.state,n=t.windowWidth,s=t.windowHeight,c=Math.ceil(this.props.documentListFiltered.length/Math.floor((window.innerWidth-.4*window.innerWidth)/this.config.thumbnailWidth)),o=Math.floor(n/this.config.thumbnailWidth);return Object(A.jsxs)(Ne.a,{container:!0,children:[Object(A.jsx)(Xe.SelectableGroup,{onSelection:this.handleSelection,enabled:!0,onEndSelection:this.handleEndSelection,onBeginSelection:this.handleBeginSelection,onNonItemClick:this.handleNonItemClick,children:Object(A.jsx)(Ke.a,{className:"Grid",columnCount:o,columnWidth:1.1*parseInt(this.config.thumbnailWidth),height:s,rowCount:c,rowHeight:1.5*parseInt(this.config.thumbnailWidth),width:window.innerWidth-.1*window.innerWidth,children:function(t){var n,s=t.columnIndex,c=t.rowIndex,l=t.style,u=c*o+s,h=e.props.documentListFiltered[u],d=e.state.selectedKeys.indexOf(u)>-1;return console.log(u,"document"),h?Object(A.jsx)("div",{style:l,children:e.props.documentListFiltered.length>0?Object(a.createElement)(qe,Object(i.a)(Object(i.a)({},e.props),{},(n={key:u,isSelected:d,selectableKey:u,documentName:h.filename},Object(Ie.a)(n,"key",h.filename),Object(Ie.a)(n,"multiSelected",e.state.multiSelected),Object(Ie.a)(n,"onNonItemClick",e.handleNonItemClick),Object(Ie.a)(n,"selectedKeys",e.state.selectedKeys),n)),Object(A.jsx)(r.a.Fragment,{children:Object(A.jsxs)(Me,{children:[Object(A.jsx)(Ye.a,{onContextMenu:function(t){e.handleUnselectClick(t,u)},style:{background:d?"#B7DBF2":""},children:Object(A.jsx)(Ue,{filename:h.filename,bucketName:e.config.bucketName,width:e.config.thumbnailWidth})}),Object(A.jsx)(Je.a,{children:Object(A.jsx)("small",{children:h.filename})})]})})):""}):Object(A.jsx)(r.a.Fragment,{})}})}),Object(A.jsx)(L.a,{})]})}}]),n}(r.a.Component),Qe=n(180),Ze=n.n(Qe),et=n(187);function tt(e){var t=e.children,n=e.value,a=e.index,r=Object(et.a)(e,["children","value","index"]);return Object(A.jsx)("div",Object(i.a)(Object(i.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},r),{},{children:n===a&&Object(A.jsx)(W.a,{sx:{p:3},children:Object(A.jsx)(x.a,{children:t})})}))}var nt=n(369),at=n(367),rt=n(181),st=n.n(rt),ct=n(183),it=n.n(ct),ot=n(184),lt=n.n(ot),ut=n(185),ht=n.n(ut),dt=n(366),bt=n(371),pt=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).classes=Object(f.a)({list:{width:250},fullList:{width:"auto"}}),a.state={data:null,isOpen:!1},a.handleDocumentClick=function(e){a.props.handleDocumentUpdate(e)},a.componentDidMount=function(){a.setState({windowHeight:window.innerHeight-325})},a.toggleDrawer=function(e){return function(e){(!e||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&a.setState(Object(i.a)(Object(i.a)({},a.state),{},{isOpen:!a.state.isOpen}))}},a.handleGenerateCsvClick=a.handleGenerateCsvClick.bind(Object(b.a)(a)),console.log("NavigationDrawer props"),console.log(e),a}return Object(d.a)(n,[{key:"handleGenerateCsvClick",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.generateCsv();case 3:for(r in t=e.sent,"/training-animation.gif",n="",a="",n="<font size='+1'><b>gs://".concat(t[0].path,"</b></font><br><i>").concat(t[0].numRecords,"</i> Documents labeled.<br>"),t)s=t[r],r>0&&(a+="<font size='+1'>".concat(s.label,"</font><br>gs://").concat(s.path,"<br><i>").concat(s.numRecords,"</i> Documents labeled. <p>"));a&&(n+="<h3>Word Labels</h3><blockquote>".concat(a,"</blockquote> ")),this.props.setAlert(" <img style='float:right' width='50%' src='".concat("/training-animation.gif","'>\n        <hr>\n       ").concat(n,"\n       \n       <hr>\n        Please go to <a target=\"_new\" href='https://console.cloud.google.com/vertex-ai/datasets/create'>Vertex AI Cloud Console</a>. Choose 'Image Classification' then, import dataset."),"CSV Generation Success"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),this.props.setError(e.t0.message,"CSV Generation Failed");case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(A.jsx)(B.a,{title:"Import labels into the applicatoin",children:Object(A.jsxs)(w.a,{onClick:function(){e.props.onImportLabels(e.props.importLabelFilename)},button:!0,children:[Object(A.jsx)(ce.a,{primary:"Import Labels",secondary:"Load Predicted Labels"}),Object(A.jsx)(Ce.a,{})]},"import-labels")})}}]),n}(a.Component),jt=n(182),mt=n.n(jt),ft=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={csvFilename:"",importLabelFilename:""},a.sampleImportLabelJson={prediction_regex_phash:{"gs://docai_predictions_dev/Batch/converted_images/Converted_files-2021-11-03_102007/56849419_85222772_98512.png":{label:"00639_x",group:null,confidence_score:.7},"gs://docai_predictions_dev/Batch/converted_images/Converted_files-2021-11-03_102007/56849384_85222731_98512.png":{label:"group_2",group:NaN,confidence_score:.3}}},a.handleChangeCsvFilename=a.handleChangeCsvFilename.bind(Object(b.a)(a)),a.handleChangeImportLabelFilename=a.handleChangeImportLabelFilename.bind(Object(b.a)(a)),a.config=new N,a.defaultFilename="".concat(a.config.bucketName,"/training.csv"),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.state.csvFilename||this.setState({csvFilename:this.defaultFilename})}},{key:"handleChangeImportLabelFilename",value:function(e){this.setState({importLabelFilename:e.target.value})}},{key:"handleChangeCsvFilename",value:function(e){this.setState({csvFilename:e.target.value})}},{key:"render",value:function(){var e=this;return Object(A.jsxs)(Ne.a,{style:{margin:"50px"},children:[Object(A.jsxs)(Ne.a,{children:[Object(A.jsx)("h3",{children:"AutoML Training CSV"}),Object(A.jsx)("table",{children:Object(A.jsxs)("tr",{children:[Object(A.jsxs)("td",{valign:"top",children:["GS:// ",Object(A.jsx)(S.a,{value:this.state.csvFilename,iu:!0,onChange:this.handleChangeCsvFilename}),Object(A.jsx)(B.a,{title:"Reset training file path to default (".concat(this.defaultFilename,")"),children:Object(A.jsx)(I.a,{"aria-label":"delete",size:"small",onClick:function(){e.setState({csvFilename:e.defaultFilename})},children:Object(A.jsx)(mt.a,{fontSize:"inherit"})})})]}),Object(A.jsx)("td",{valign:"top",children:Object(A.jsx)(Me,{children:Object(A.jsx)(ye,Object(i.a)(Object(i.a)({},this.props),{},{csvFilename:this.state.csvFilename}))})})]})})]}),Object(A.jsxs)(Ne.a,{children:[Object(A.jsx)("h3",{children:"Import Labels"}),Object(A.jsx)("table",{children:Object(A.jsxs)("tr",{children:[Object(A.jsxs)("td",{valign:"top",children:["GS:// ",Object(A.jsx)(S.a,{value:this.state.importLabelFilename,onChange:this.handleChangeImportLabelFilename}),Object(A.jsx)("br",{}),Object(A.jsx)(dt.a,{control:Object(A.jsx)(bt.a,{defaultChecked:!0,color:"primary"}),label:"Copy Files ?"})]}),Object(A.jsx)("td",{valign:"top",children:Object(A.jsx)(Me,{children:Object(A.jsx)(pt,Object(i.a)(Object(i.a)({},this.props),{},{importLabelFilename:this.state.importLabelFilename}))})}),Object(A.jsx)("td",{}),Object(A.jsxs)("td",{valign:"top",children:[this.props.labelsImported?Object(A.jsxs)(x.a,{color:"primary",children:[Object(A.jsx)("b",{children:"Import Status"}),": ",this.props.labelsImported]}):""," "]})]})}),Object(A.jsx)("h3",{children:"Import Label Format "}),Object(A.jsx)("pre",{children:JSON.stringify(this.sampleImportLabelJson,null,2)})]})]})}}]),n}(a.Component),Ot=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e,a){var r;return Object(h.a)(this,n),(r=t.call(this,e,a)).state={selectedKeys:[],selectedLabel:"None",selectedModelHash:null,filter:"",documentList:[],autoMLModelList:[],autoMLPrediction:!1,tabValue:0,error:{title:null,content:null,isOpen:!1},alert:{title:null,content:null,isOpen:!1},labels:[],labelsFiltered:[],documentListFiltered:[],labelsImported:""},r.refreshDocumentList=r.refreshDocumentList.bind(Object(b.a)(r)),r.forceUpdateHandler=r.forceUpdateHandler.bind(Object(b.a)(r)),r.handleErrorClose=r.handleErrorClose.bind(Object(b.a)(r)),r.handleApplyLabelToDocument=r.handleApplyLabelToDocument.bind(Object(b.a)(r)),r.handleApplyLabelToMulitpleDocuments=r.handleApplyLabelToMulitpleDocuments.bind(Object(b.a)(r)),r.refreshLabels=r.refreshLabels.bind(Object(b.a)(r)),r.handleLabelSelected=r.handleLabelSelected.bind(Object(b.a)(r)),r.handleLabelAdded=r.handleLabelAdded.bind(Object(b.a)(r)),r.handleLabelRemoved=r.handleLabelRemoved.bind(Object(b.a)(r)),r.generateCsv=r.generateCsv.bind(Object(b.a)(r)),r.handleImportLabels=r.handleImportLabels.bind(Object(b.a)(r)),r.setError=r.setError.bind(Object(b.a)(r)),r.setAlert=r.setAlert.bind(Object(b.a)(r)),r.state.selectedDocument=window.location.pathname.replace(/^\/+/g,""),r.config=new N,r.handleChangeLabel=r.handleChangeLabel.bind(Object(b.a)(r)),r}return Object(d.a)(n,[{key:"forceUpdateHandler",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshLabels();case 2:return e.next=4,this.refreshDocumentList();case 4:return e.next=6,this.handleChangeLabel();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error",n=this.state.error;n.title=t,n.content=e,n.isOpen=!0,this.setState(Object(i.a)(Object(i.a)({},this.state),{},{error:n}))}},{key:"setAlert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Alert",n=this.state.alert;n.title=t,n.content=e,n.isOpen=!0,this.setState(Object(i.a)(Object(i.a)({},this.state),{},{alert:n}))}},{key:"handleErrorClose",value:function(){var e=this.state.error;e.isOpen=!1;var t=this.state.alert;t.isOpen=!1,this.setState(Object(i.a)(Object(i.a)({},this.state),{},{alert:t,error:e}))}},{key:"refreshAll",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.refreshDocumentList(),this.refreshLabels(),this.handleChangeLabel();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshLabels",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new ae,e.next=4,t.getLabels();case 4:return n=e.sent,e.abrupt("return",this.setState({labels:n}));case 8:e.prev=8,e.t0=e.catch(0),this.setError("Could Not refresh Labels",e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleApplyLabelToMulitpleDocuments",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in this.state.documentList,t)r=this.state.documentListFiltered[a],this.handleApplyLabelToDocument(n,r.filename);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleApplyLabelToDocument",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,s,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new ae).setLabel(t,n),a="",r=this.state.documentList,e.t0=l.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=13;break}if(s=e.t1.value,r[s].filename!=n){e.next=11;break}return a=r[s].labelName,r[s].labelName=t,e.abrupt("break",13);case 11:e.next=5;break;case 13:for(i in c=this.state.labels,this.state.labels)i==a&&c[i]--,i==t&&c[i]++;return e.next=17,this.setState({documentList:r,labels:c});case 17:return e.next=19,this.handleChangeLabel();case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleLabelSelected",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({selectedLabel:t});case 2:return e.next=4,this.handleChangeLabel();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLabelRemoved",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ae,e.next=3,n.removeLabel(t);case 3:return e.next=5,this.refreshLabels();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLabelAdded",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new ae,e.next=4,n.addLabel(t);case 4:return e.next=6,this.refreshLabels();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setError("Could Not Add Label "+t,e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleImportLabels",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({labelsImported:"Initializing..."}),n=new ae(this.state.accessToken),this.canLoadDocumentList()){e.next=5;break}return console.log("Missing bucket, or no selected document. Not calling importLabels ."),e.abrupt("return");case 5:if(e.prev=5,t){e.next=8;break}throw new Error("Missing Label Path");case 8:return n.importLabels(t,(function(e){a.setState({labelsImported:e})})),e.abrupt("return",this.refreshAll());case 12:e.prev=12,e.t0=e.catch(5),this.setError(e.t0.message,"Could not Import Labels");case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"generateCsv",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new se(this.state.accessToken),this.canLoadDocumentList()){e.next=4;break}return console.log("Missing bucket, or no selected document. Not calling generateCsv ."),e.abrupt("return");case 4:return e.prev=4,e.abrupt("return",t.generateCsv());case 8:e.prev=8,e.t0=e.catch(4),this.setError(e.t0.message,"Could not Generate CSV");case 11:case"end":return e.stop()}}),e,this,[[4,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"canLoadDocument",value:function(){return this.config.bucketName&&this.state.selectedDocument}},{key:"canLoadDocumentList",value:function(){return this.config.bucketName}},{key:"filterLabels",value:function(e){this.setState({labelsFiltered:Object.keys(this.state.labels).filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}))}),console.log(this.state.labelsFiltered,"new filter array")}},{key:"handleSearchBarchChange",value:function(e){this.setState({filter:e}),this.filterLabels(this.state.filter),console.log(this.state.filter,"recording the filter inputs")}},{key:"handleSerachBarClear",value:function(){this.setState({filter:""}),console.log(this.state.filter,"clear search filter")}},{key:"a11yProps",value:function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}},{key:"handleChange",value:function(e){var t=e.currentTarget.attributes[1].ownerElement.id;this.setState({tabValue:parseInt(t.substr(t.length-1))}),console.log(this.state.tabValue,"tabs")}},{key:"handleChangeLabel",value:function(){for(var e=this.state.documentList,t=[],n=0;n<e.length;n++){var a=e[n];"None"==this.state.selectedLabel?a.labelName&&"None"!=a.labelName||t.push(a):a.labelName==this.state.selectedLabel&&t.push(a)}return this.setState({documentListFiltered:t})}},{key:"refreshDocumentList",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("refreshDocumentList??!?!?"),this.canLoadDocumentList()){e.next=4;break}return console.log("Missing bucket, or no selected document. Not loading document list."),e.abrupt("return");case 4:return e.prev=4,t=new re(this.state.accessToken),e.next=8,t.loadDocumentList();case 8:return n=e.sent,e.abrupt("return",this.setState(Object(i.a)(Object(i.a)({},this.state),{},{documentList:n})));case 12:e.prev=12,e.t0=e.catch(4),"Not Found"==e.t0.message?this.setError("Bucket '"+this.config.bucketName+"' "+e.t0.message,"Bucket Not Found"):this.setError(e.t0.message,"Could not List Documents");case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSelection",value:function(e){this.setState({selectedKeys:e})}},{key:"render",value:function(){var e=this;return console.log(this.state.selectedLabel,"labelname"),Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(Z,{title:this.state.error.title,content:this.state.error.content,open:this.state.error.isOpen,onClose:this.handleErrorClose}),Object(A.jsx)(Z,{title:this.state.alert.title,content:this.state.alert.content,open:this.state.alert.isOpen,severity:"info",onClose:this.handleErrorClose}),Object(A.jsx)(J,{selectedDocument:this.state.selectedDocument,setError:this.setError,setAlert:this.setAlert,generateCsv:this.generateCsv,userProfile:this.state.userProfile,documentList:this.state.documentList,refreshDocumentList:this.refreshDocumentList,handleDocumentUpdate:this.handleDocumentUpdate}),Object(A.jsxs)(W.a,{sx:{width:"100%"},children:[Object(A.jsx)(W.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(A.jsx)(O.a,{position:"static",children:Object(A.jsxs)(nt.a,{value:this.state.tabValue,onChange:function(t){return e.handleChange(t)},"aria-label":"basic tabs example",variant:"fullWidth",children:[Object(A.jsx)(at.a,Object(i.a)({label:"Document Labelling View",icon:Object(A.jsx)(it.a,{})},this.a11yProps(0))),Object(A.jsx)(at.a,Object(i.a)({label:"Training View",icon:Object(A.jsx)(lt.a,{})},this.a11yProps(1))),Object(A.jsx)(at.a,Object(i.a)({label:"Model Manager View",icon:Object(A.jsx)(ht.a,{})},this.a11yProps(2)))]})})}),Object(A.jsxs)(st.a,{index:this.state.tabValue,onChangeIndex:function(t){return e.handleChange(t)},children:[Object(A.jsx)(tt,{value:this.state.tabValue,index:0,children:Object(A.jsxs)(Ne.a,{container:!0,children:[Object(A.jsxs)(Ne.a,{item:!0,xs:2,children:[Object(A.jsx)(L.a,{}),Object(A.jsx)(ce.a,{color:"primary",children:Object(A.jsx)(w.a,{children:Object(A.jsx)("h3",{children:"Document Labels & Clusters"})},"labeled")}),Object(A.jsx)(Ze.a,{placeholder:"Type here to Filter Labels",value:"",onChange:function(t){return e.handleSearchBarchChange(t)},onCancelSearch:function(){return e.handleSerachBarClear()}}),Object(A.jsx)(Le,{labels:this.state.labels,labelsFiltered:this.state.labelsFiltered,filter:this.state.filter,onLabelSelected:this.handleLabelSelected,onLabelAdded:this.handleLabelAdded,onLabelRemoved:this.handleLabelRemoved,selectedLabel:this.state.selectedLabel,generateCsv:this.generateCsv,setError:this.setError,setAlert:this.setAlert})]}),Object(A.jsxs)(Ne.a,{item:!0,xs:10,children:[Object(A.jsx)("h1",{children:"Document List"}),Object(A.jsx)(W.a,{sx:{flexGrow:2},children:Object(A.jsx)($e,{labels:this.state.labels,documentListFiltered:this.state.documentListFiltered,onApplyLabelToDocument:this.handleApplyLabelToDocument,onApplyLabelToMultipleDocuments:this.handleApplyLabelToMulitpleDocuments,selectedLabel:this.state.selectedLabel},this.state.selectedLabel)})]})]})}),Object(A.jsx)(tt,{value:this.state.tabValue,index:1,children:Object(A.jsx)(ft,{labelsImported:this.state.labelsImported,onImportLabels:this.handleImportLabels,generateCsv:this.generateCsv,setError:this.setError,setAlert:this.setAlert})}),Object(A.jsx)(tt,{value:this.state.tabValue,index:2,children:"In Progress"})]})]})]})}}]),n}(a.Component),vt=Object(Se.d)(Ot);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xt=n(130);c.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(xt.a,{children:Object(A.jsx)(vt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[309,1,2]]]);
//# sourceMappingURL=main.62c380b2.chunk.js.map